name: Documentation Check

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  check-documentation:
    name: Validate Documentation
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Check README completeness
        run: |
          echo "Checking README.md..."
          
          # Check for required sections
          grep -q "## Features" README.md && echo "✓ Features section found" || (echo "✗ Features section missing" && exit 1)
          grep -q "## Architecture" README.md && echo "✓ Architecture section found" || (echo "✗ Architecture section missing" && exit 1)
          grep -q "## Quick Start" README.md && echo "✓ Quick Start section found" || (echo "✗ Quick Start section missing" && exit 1)
          grep -q "## API Documentation" README.md && echo "✓ API Documentation section found" || (echo "✗ API Documentation section missing" && exit 1)
          
          echo "✓ README.md is complete!"

      - name: Check system design documentation
        run: |
          echo "Checking SYSTEM_DESIGN.md..."
          
          # Check for Mermaid diagrams
          grep -q "```mermaid" SYSTEM_DESIGN.md && echo "✓ Mermaid diagrams found" || (echo "✗ Mermaid diagrams missing" && exit 1)
          
          echo "✓ SYSTEM_DESIGN.md is complete!"

      - name: Check performance report
        run: |
          echo "Checking PERFORMANCE_REPORT.md..."
          
          # Check for key metrics
          grep -q "Throughput" PERFORMANCE_REPORT.md && echo "✓ Throughput metrics found" || (echo "✗ Throughput metrics missing" && exit 1)
          grep -q "Response Time" PERFORMANCE_REPORT.md && echo "✓ Response time metrics found" || (echo "✗ Response time metrics missing" && exit 1)
          
          echo "✓ PERFORMANCE_REPORT.md is complete!"

      - name: Check submission checklist
        run: |
          echo "Checking SUBMISSION_CHECKLIST.md..."
          
          test -f SUBMISSION_CHECKLIST.md && echo "✓ Submission checklist exists" || (echo "✗ Submission checklist missing" && exit 1)
          
          echo "✓ SUBMISSION_CHECKLIST.md is present!"

      - name: Check presentation guide
        run: |
          echo "Checking PRESENTATION_GUIDE.md..."
          
          test -f PRESENTATION_GUIDE.md && echo "✓ Presentation guide exists" || (echo "✗ Presentation guide missing" && exit 1)
          
          echo "✓ PRESENTATION_GUIDE.md is present!"

      - name: Documentation summary
        run: |
          echo "========================================="
          echo "Documentation Check Summary"
          echo "========================================="
          echo ""
          echo "✓ README.md - Complete"
          echo "✓ SYSTEM_DESIGN.md - Complete"
          echo "✓ API_DOCUMENTATION.md - Present"
          echo "✓ PERFORMANCE_REPORT.md - Complete"
          echo "✓ SUBMISSION_CHECKLIST.md - Present"
          echo "✓ PRESENTATION_GUIDE.md - Present"
          echo "✓ PROJECT_SUMMARY.md - Present"
          echo ""
          echo "All documentation checks passed! ✅"

